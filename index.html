<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="A clean quote wall with search, favorites, shuffle, and focus view." />
  <title>Signal & Study</title>

  <!-- New fonts (different from your other sites) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@500;700;900&family=Space+Mono:wght@400;700&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#f7f5f0;
      --ink:#101015;
      --soft:#ffffff;
      --line: rgba(16,16,21,.12);
      --muted: rgba(16,16,21,.62);

      --accent:#ff2d55;
      --accent2:#2de2e6;
      --accent3:#ffd60a;

      --shadow: 0 12px 28px rgba(0,0,0,.12);
      --shadow2: 0 18px 46px rgba(0,0,0,.16);

      --r: 14px;
      --headline: "Unbounded", system-ui, sans-serif;
      --body: "Inter", system-ui, sans-serif;
      --mono: "Space Mono", ui-monospace, Menlo, Consolas, monospace;
    }

    [data-theme="noir"]{
      --bg:#0b0b10;
      --ink:#f4f3f8;
      --soft:#12121a;
      --line: rgba(244,243,248,.14);
      --muted: rgba(244,243,248,.62);
      --shadow: 0 12px 28px rgba(0,0,0,.55);
      --shadow2: 0 18px 46px rgba(0,0,0,.70);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: var(--bg);
      color: var(--ink);
      font-family: var(--body);
    }

    .hero{
      position: relative;
      padding: 26px 18px 14px;
      border-bottom: 1px solid var(--line);
      overflow:hidden;
    }
    .hero::before{
      content:"";
      position:absolute;
      inset:-120px -120px auto -120px;
      height: 320px;
      background:
        radial-gradient(240px 240px at 15% 40%, rgba(255,45,85,.35), transparent 60%),
        radial-gradient(260px 260px at 55% 20%, rgba(45,226,230,.28), transparent 60%),
        radial-gradient(260px 260px at 85% 65%, rgba(255,214,10,.25), transparent 60%);
      filter: blur(2px);
      pointer-events:none;
    }

    .heroInner{
      max-width: 1150px;
      margin: 0 auto;
      position:relative;
      z-index:1;
    }

    h1{
      font-family: var(--headline);
      margin:0;
      font-size: clamp(26px, 3.6vw, 52px);
      line-height: 1.02;
      letter-spacing: -0.02em;
      text-transform: uppercase;
    }
    .sub{
      margin: 10px 0 0;
      max-width: 78ch;
      color: var(--muted);
      font-size: 14px;
      line-height: 1.45;
    }

    .filters{
      max-width: 1150px;
      margin: 14px auto 0;
      padding: 0 18px 14px;
      display:grid;
      grid-template-columns: 1.4fr .8fr .8fr;
      gap: 10px;
    }
    @media (max-width: 920px){
      .filters{ grid-template-columns: 1fr; }
    }

    .field label{
      display:block;
      font-family: var(--mono);
      font-size: 11px;
      letter-spacing: .10em;
      text-transform: uppercase;
      color: var(--muted);
      margin: 0 0 6px 4px;
    }

    input, select{
      width:100%;
      padding: 12px 12px;
      border-radius: var(--r);
      border: 1px solid var(--line);
      background: var(--soft);
      color: var(--ink);
      outline:none;
      font-size: 14px;
      box-shadow: var(--shadow);
    }

    input:focus, select:focus{
      border-color: rgba(255,45,85,.65);
      box-shadow: 0 0 0 4px rgba(255,45,85,.16), var(--shadow);
    }

    .gridWrap{
      max-width: 1150px;
      margin: 0 auto;
      padding: 12px 18px 110px;
    }
    .masonry{
      column-count: 3;
      column-gap: 14px;
    }
    @media (max-width: 980px){ .masonry{ column-count: 2; } }
    @media (max-width: 620px){ .masonry{ column-count: 1; } }

    .tile{
      break-inside: avoid;
      display:block;
      margin: 0 0 14px;
      border-radius: var(--r);
      border: 1px solid var(--line);
      background: var(--soft);
      box-shadow: var(--shadow2);
      overflow:hidden;
      position:relative;
      cursor:pointer;
      transition: transform .08s ease;
    }
    .tile:active{ transform: translateY(1px); }

    .ribbon{
      height: 8px;
      background: linear-gradient(90deg, var(--accent), var(--accent2), var(--accent3));
    }

    .tileBody{
      padding: 14px 14px 12px;
    }

    .quote{
      margin:0;
      font-size: 18px;
      line-height: 1.35;
      letter-spacing: -0.01em;
    }

    .meta{
      margin-top: 12px;
      display:flex;
      flex-wrap:wrap;
      gap: 8px;
      align-items:center;
      color: var(--muted);
      font-family: var(--mono);
      font-size: 11px;
    }

    .pill{
      border: 1px solid var(--line);
      border-radius: 999px;
      padding: 6px 10px;
      background: rgba(255,255,255,.55);
    }
    [data-theme="noir"] .pill{ background: rgba(255,255,255,.06); }

    .tagRow{
      margin-top: 10px;
      display:flex;
      flex-wrap:wrap;
      gap: 8px;
    }
    .tag{
      font-family: var(--mono);
      font-size: 11px;
      border: 1px dashed var(--line);
      border-radius: 999px;
      padding: 6px 10px;
      color: var(--muted);
      background: rgba(0,0,0,.02);
    }
    [data-theme="noir"] .tag{ background: rgba(255,255,255,.06); }

    .favMark{
      position:absolute;
      top: 10px;
      right: 10px;
      font-family: var(--headline);
      font-size: 14px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.72);
      box-shadow: var(--shadow);
      display:none;
    }
    [data-theme="noir"] .favMark{ background: rgba(255,255,255,.08); }
    .tile.fav .favMark{ display:block; }

    .dock{
      position: fixed;
      left: 50%;
      bottom: 14px;
      transform: translateX(-50%);
      width: min(980px, calc(100% - 24px));
      border-radius: 20px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.78);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow2);
      padding: 10px;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      z-index: 999;
    }
    [data-theme="noir"] .dock{ background: rgba(18,18,26,.72); }

    .badge{
      font-family: var(--mono);
      font-size: 12px;
      color: var(--muted);
      padding: 8px 10px;
      border: 1px solid var(--line);
      border-radius: 999px;
      white-space:nowrap;
    }

    .dockBtns{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .btn{
      font-family: var(--mono);
      font-size: 12px;
      font-weight: 700;
      letter-spacing: .06em;
      text-transform: uppercase;
      padding: 10px 12px;
      border-radius: 12px;
      border: 2px solid var(--ink);
      background: transparent;
      color: var(--ink);
      cursor:pointer;
      transition: background .12s ease, color .12s ease, transform .08s ease;
      user-select:none;
    }
    .btn:active{ transform: translateY(1px); }
    .btn:hover{ background: var(--ink); color: var(--bg); }

    .btn.pink{ border-color: var(--accent); color: var(--accent); }
    .btn.pink:hover{ background: var(--accent); color: #fff; }

    .btn.cyan{ border-color: var(--accent2); color: var(--accent2); }
    .btn.cyan:hover{ background: var(--accent2); color: #001014; }

    .btn.sun{ border-color: var(--accent3); color: var(--accent3); }
    .btn.sun:hover{ background: var(--accent3); color: #101015; }

    .btn.ghost{
      border-color: var(--line);
      color: var(--muted);
    }
    .btn.ghost:hover{
      background: rgba(0,0,0,.06);
      color: var(--ink);
    }

    .overlay{
      position: fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,.62);
      z-index: 1000;
      padding: 18px;
    }
    .overlay.show{ display:flex; }

    .modal{
      width: min(900px, 100%);
      border-radius: 22px;
      border: 1px solid var(--line);
      background: var(--soft);
      box-shadow: var(--shadow2);
      overflow:hidden;
    }

    .modalTop{
      padding: 12px 14px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      border-bottom: 1px solid var(--line);
      background:
        linear-gradient(90deg, rgba(255,45,85,.10), rgba(45,226,230,.08), rgba(255,214,10,.10));
    }

    .modalTop strong{
      font-family: var(--headline);
      text-transform: uppercase;
      letter-spacing:-.01em;
      font-size: 14px;
    }

    .modalBody{ padding: 14px; }

    .big{
      font-family: var(--headline);
      font-size: clamp(22px, 2.8vw, 44px);
      line-height: 1.12;
      margin: 0;
    }

    .modalMeta{
      margin-top: 12px;
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      font-family: var(--mono);
      font-size: 12px;
      color: var(--muted);
    }

    .toast{
      position: fixed;
      left: 50%;
      bottom: 92px;
      transform: translateX(-50%);
      background: rgba(16,16,21,.92);
      color: white;
      border: 1px solid rgba(255,255,255,.18);
      border-radius: 14px;
      padding: 10px 12px;
      font-size: 13px;
      opacity: 0;
      pointer-events:none;
      transition: opacity .2s ease, transform .2s ease;
      z-index: 1100;
      max-width: min(980px, calc(100% - 24px));
      text-align:center;
      font-family: var(--mono);
    }
    .toast.show{
      opacity: 1;
      transform: translateX(-50%) translateY(-6px);
    }
  </style>
</head>

<body>
  <section class="hero">
    <div class="heroInner">
      <h1>Signal &amp; Study</h1>
      <p class="sub">Click any tile to open it. Save favorites, shuffle, search by theme or book.</p>
    </div>
  </section>

  <section class="filters">
    <div class="field">
      <label for="search">Search</label>
      <input id="search" placeholder="Try: prayer, questions, study, reading…" />
    </div>
    <div class="field">
      <label for="book">Book</label>
      <select id="book"></select>
    </div>
    <div class="field">
      <label for="view">View</label>
      <select id="view">
        <option value="all">All</option>
        <option value="favorites">Favorites</option>
      </select>
    </div>
  </section>

  <main class="gridWrap">
    <div class="masonry" id="grid"></div>
  </main>

  <div class="dock">
    <div class="badge" id="countBadge">0 tiles</div>
    <div class="dockBtns">
      <button class="btn ghost" id="themeBtn">Theme</button>
      <button class="btn cyan" id="shuffleBtn">Shuffle</button>
      <button class="btn pink" id="copyBtn">Copy</button>
      <button class="btn sun" id="favBtn">Favorite</button>
    </div>
  </div>

  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="modalTop">
        <strong id="modalTitle">Focus</strong>
        <button class="btn ghost" id="closeBtn" style="padding:8px 10px;border-width:1px;">Close</button>
      </div>
      <div class="modalBody">
        <p class="big" id="modalQuote"></p>
        <div class="modalMeta" id="modalMeta"></div>
        <div style="margin-top:14px;display:flex;gap:10px;flex-wrap:wrap;">
          <button class="btn cyan" id="modalCopy">Copy</button>
          <button class="btn sun" id="modalFav">Favorite</button>
          <button class="btn pink" id="modalNext">Next</button>
        </div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    // Your quote is kept EXACTLY as you provided it. (Not first.)
    // All other quotes below are original lines in a similar idea-set (reading/study/prayer/questions).

    const quotes = [
      { id:"q1", text:"He studied until the page stopped being information and started being responsibility.", book:"Original", author:"—", cite:"", tags:["study","responsibility"] },
      { id:"q2", text:"Prayer didn’t erase the questions; it taught him how to carry them.", book:"Original", author:"—", cite:"", tags:["prayer","questions"] },
      { id:"q3", text:"He read for peace, but the words kept waking him up.", book:"Original", author:"—", cite:"", tags:["reading","restlessness"] },

      { id:"wiesel-4",
        text:"I read, I studied, I prayed... I wanted to ask him the questions that thronged my mind",
        book:"Night",
        author:"Elie Wiesel",
        cite:"(Wiesel 4)",
        tags:["reading","study","prayer","questions"]
      },

      { id:"q4", text:"He tried to study like a shield, but knowledge isn’t armor—only light.", book:"Original", author:"—", cite:"", tags:["study","truth"] },
      { id:"q5", text:"The more he learned, the louder the unanswered parts became.", book:"Original", author:"—", cite:"", tags:["learning","questions"] },
      { id:"q6", text:"He prayed in short sentences, as if breath itself was the limit.", book:"Original", author:"—", cite:"", tags:["prayer","fear"] },
      { id:"q7", text:"He kept reading because stopping felt like surrender.", book:"Original", author:"—", cite:"", tags:["reading","endurance"] },
      { id:"q8", text:"He wanted one clean answer, but life only offered complicated truth.", book:"Original", author:"—", cite:"", tags:["truth","complexity"] },
      { id:"q9", text:"His questions arrived faster than his courage, but both arrived.", book:"Original", author:"—", cite:"", tags:["questions","courage"] },
      { id:"q10", text:"He studied quietly, like someone trying not to disturb grief.", book:"Original", author:"—", cite:"", tags:["study","grief"] },
      { id:"q11", text:"He read as if a sentence could be a map out of darkness.", book:"Original", author:"—", cite:"", tags:["reading","hope"] },
      { id:"q12", text:"He prayed without certainty, which was the most honest prayer he had.", book:"Original", author:"—", cite:"", tags:["prayer","doubt"] }
    ];

    const els = {
      search: document.getElementById("search"),
      book: document.getElementById("book"),
      view: document.getElementById("view"),
      grid: document.getElementById("grid"),
      countBadge: document.getElementById("countBadge"),

      themeBtn: document.getElementById("themeBtn"),
      shuffleBtn: document.getElementById("shuffleBtn"),
      copyBtn: document.getElementById("copyBtn"),
      favBtn: document.getElementById("favBtn"),

      overlay: document.getElementById("overlay"),
      closeBtn: document.getElementById("closeBtn"),
      modalTitle: document.getElementById("modalTitle"),
      modalQuote: document.getElementById("modalQuote"),
      modalMeta: document.getElementById("modalMeta"),
      modalCopy: document.getElementById("modalCopy"),
      modalFav: document.getElementById("modalFav"),
      modalNext: document.getElementById("modalNext"),

      toast: document.getElementById("toast"),
    };

    const storage = {
      getTheme: () => localStorage.getItem("ss_theme2") || "paper",
      setTheme: (t) => localStorage.setItem("ss_theme2", t),
      getFavs: () => {
        try { return JSON.parse(localStorage.getItem("ss_favs2") || "[]"); } catch { return []; }
      },
      setFavs: (arr) => localStorage.setItem("ss_favs2", JSON.stringify(arr)),
    };

    let favorites = new Set(storage.getFavs());
    let currentId = null;

    function showToast(msg){
      els.toast.textContent = msg;
      els.toast.classList.add("show");
      clearTimeout(showToast._t);
      showToast._t = setTimeout(() => els.toast.classList.remove("show"), 1300);
    }

    function escapeHtml(str){
      return String(str).replace(/[&<>"']/g, s => ({
        "&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#039;"
      })[s]);
    }

    function uniq(arr){ return Array.from(new Set(arr)).sort((a,b)=>a.localeCompare(b)); }

    function matches(q, item){
      if(!q) return true;
      const hay = [item.text, item.book, item.author, item.cite || "", ...(item.tags||[])].join(" ").toLowerCase();
      return hay.includes(q.toLowerCase());
    }

    function buildBookFilter(){
      const books = uniq(quotes.map(q => q.book));
      els.book.innerHTML =
        `<option value="">All books</option>` +
        books.map(b => `<option value="${escapeHtml(b)}">${escapeHtml(b)}</option>`).join("");
    }

    function filtered(){
      const q = (els.search.value || "").trim();
      const book = els.book.value;
      const view = els.view.value;

      return quotes.filter(item => {
        if(book && item.book !== book) return false;
        if(view === "favorites" && !favorites.has(item.id)) return false;
        return matches(q, item);
      });
    }

    function render(){
      const list = filtered();
      els.countBadge.textContent = `${list.length} tiles`;

      if(!currentId || !list.some(x => x.id === currentId)){
        currentId = list[0]?.id || null;
      }

      els.grid.innerHTML = list.map(q => {
        const isFav = favorites.has(q.id);
        const tags = (q.tags||[]).slice(0, 5);
        return `
          <article class="tile ${isFav ? "fav" : ""}" data-id="${escapeHtml(q.id)}">
            <div class="ribbon"></div>
            <div class="favMark">★</div>
            <div class="tileBody">
              <p class="quote">“${escapeHtml(q.text)}”</p>
              <div class="meta">
                <span class="pill">${escapeHtml(q.book || "—")}</span>
                <span class="pill">${escapeHtml(q.author || "—")}</span>
                ${q.cite ? `<span class="pill">${escapeHtml(q.cite)}</span>` : ""}
              </div>
              <div class="tagRow">
                ${tags.map(t => `<span class="tag">${escapeHtml(t)}</span>`).join("")}
              </div>
            </div>
          </article>
        `;
      }).join("");
    }

    function openFocus(id){
      const list = filtered();
      const q = list.find(x => x.id === id) || quotes.find(x => x.id === id);
      if(!q) return;

      currentId = q.id;
      els.modalTitle.textContent = q.book || "Focus";
      els.modalQuote.textContent = `“${q.text}”`;
      els.modalMeta.innerHTML = `
        <span class="pill">${escapeHtml(q.author || "—")}</span>
        ${q.cite ? `<span class="pill">${escapeHtml(q.cite)}</span>` : `<span class="pill">—</span>`}
        <span class="pill">${favorites.has(q.id) ? "★ Saved" : "☆ Not saved"}</span>
      `;
      els.modalFav.textContent = favorites.has(q.id) ? "Unfavorite" : "Favorite";

      els.overlay.classList.add("show");
      els.overlay.setAttribute("aria-hidden","false");
    }

    function closeFocus(){
      els.overlay.classList.remove("show");
      els.overlay.setAttribute("aria-hidden","true");
    }

    function toggleFavorite(id){
      if(!id) return;
      if(favorites.has(id)) favorites.delete(id);
      else favorites.add(id);
      storage.setFavs(Array.from(favorites));
      showToast(favorites.has(id) ? "Favorited" : "Removed");
      render();
      els.modalFav.textContent = favorites.has(id) ? "Unfavorite" : "Favorite";
    }

    function fallbackCopy(text){
      const ta = document.createElement("textarea");
      ta.value = text;
      ta.style.position = "fixed";
      ta.style.left = "-9999px";
      document.body.appendChild(ta);
      ta.select();
      try{ document.execCommand("copy"); }catch(e){}
      document.body.removeChild(ta);
    }

    async function copyCurrent(){
      const q = quotes.find(x => x.id === currentId) || filtered()[0];
      if(!q) return;
      const cite = q.cite ? " " + q.cite : "";
      const author = q.author ? q.author + ", " : "";
      const text = `"${q.text}" — ${author}${q.book}${cite}`.trim();

      try{
        if(navigator.clipboard && navigator.clipboard.writeText) await navigator.clipboard.writeText(text);
        else fallbackCopy(text);
        showToast("Copied");
      }catch{
        fallbackCopy(text);
        showToast("Copied");
      }
    }

    function shuffle(){
      const list = filtered();
      if(list.length === 0) return;
      const pick = list[Math.floor(Math.random() * list.length)];
      openFocus(pick.id);
      showToast("Shuffled");
    }

    function nextInFocus(){
      const list = filtered();
      if(list.length === 0) return;
      const idx = Math.max(0, list.findIndex(x => x.id === currentId));
      const next = list[(idx + 1) % list.length];
      openFocus(next.id);
    }

    function toggleTheme(){
      const cur = document.documentElement.getAttribute("data-theme") || "paper";
      const next = cur === "noir" ? "paper" : "noir";
      if(next === "noir") document.documentElement.setAttribute("data-theme","noir");
      else document.documentElement.removeAttribute("data-theme");
      storage.setTheme(next);
      showToast("Theme");
    }

    function initTheme(){
      const t = storage.getTheme();
      if(t === "noir") document.documentElement.setAttribute("data-theme","noir");
      else document.documentElement.removeAttribute("data-theme");
    }

    function wire(){
      els.search.addEventListener("input", render);
      els.book.addEventListener("change", render);
      els.view.addEventListener("change", render);

      els.grid.addEventListener("click", (e) => {
        const tile = e.target.closest(".tile");
        if(!tile) return;
        openFocus(tile.getAttribute("data-id"));
      });

      els.themeBtn.addEventListener("click", toggleTheme);
      els.shuffleBtn.addEventListener("click", shuffle);
      els.copyBtn.addEventListener("click", copyCurrent);
      els.favBtn.addEventListener("click", () => toggleFavorite(currentId));

      els.closeBtn.addEventListener("click", closeFocus);
      els.overlay.addEventListener("click", (e) => { if(e.target === els.overlay) closeFocus(); });

      els.modalCopy.addEventListener("click", copyCurrent);
      els.modalFav.addEventListener("click", () => toggleFavorite(currentId));
      els.modalNext.addEventListener("click", nextInFocus);

      window.addEventListener("keydown", (e) => {
        if(e.key === "Escape") closeFocus();
      });
    }

    (function boot(){
      initTheme();
      buildBookFilter();
      currentId = quotes.find(q => q.id !== "wiesel-4")?.id || quotes[0]?.id || null;
      wire();
      render();
    })();
  </script>
</body>
</html>
